<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DeepL Translator - GNOME Shell Extension</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=JetBrains+Mono:wght@400;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --accent: #01cdfe;
            --accent-dim: #0191b5;
            --text: #e6edf3;
            --text-dim: #8b949e;
            --bg: #0d1117;
            --bg-elevated: #161b22;
            --border: #30363d;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.7;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        header {
            padding: 3rem 0 2rem;
            border-bottom: 1px solid var(--border);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
        }

        h1 {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text);
        }

        .version {
            font-size: 0.9rem;
            color: var(--text-dim);
            font-family: 'JetBrains Mono', monospace;
        }

        nav {
            display: flex;
            gap: 1.5rem;
            margin-top: 1.5rem;
        }

        nav a {
            color: var(--text-dim);
            text-decoration: none;
            font-size: 0.95rem;
            transition: color 0.2s;
        }

        nav a:hover {
            color: var(--accent);
        }

        section {
            padding: 4rem 0;
        }

        section:not(:last-child) {
            border-bottom: 1px solid var(--border);
        }

        h2 {
            font-size: 1.8rem;
            margin-bottom: 1.5rem;
            font-weight: 700;
        }

        h3 {
            font-size: 1.2rem;
            margin-top: 2rem;
            margin-bottom: 1rem;
            font-weight: 600;
            color: var(--accent);
        }

        p {
            color: var(--text-dim);
            margin-bottom: 1rem;
            max-width: 70ch;
        }

        .intro {
            padding: 3rem 0;
        }

        .intro p {
            font-size: 1.1rem;
            line-height: 1.8;
        }

        .install-btn {
            display: inline-block;
            margin-top: 1.5rem;
            padding: 0.8rem 1.8rem;
            background: var(--bg-elevated);
            color: var(--accent);
            text-decoration: none;
            border: 1px solid var(--accent);
            border-radius: 6px;
            font-weight: 600;
            transition: all 0.2s;
        }

        .install-btn:hover {
            background: rgba(1, 205, 254, 0.1);
            transform: translateY(-1px);
        }

        .feature-list {
            list-style: none;
            margin: 1.5rem 0;
        }

        .feature-list li {
            padding: 0.5rem 0 0.5rem 1.5rem;
            position: relative;
            color: var(--text-dim);
        }

        .feature-list li::before {
            content: '→';
            position: absolute;
            left: 0;
            color: var(--accent);
        }

        .code-block {
            background: var(--bg-elevated);
            border: 1px solid var(--border);
            border-radius: 6px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            overflow-x: auto;
        }

        .code-block pre {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            line-height: 1.6;
            color: var(--text);
        }

        .code-block code {
            color: #7ee787;
        }

        .note {
            background: rgba(1, 205, 254, 0.05);
            border-left: 3px solid var(--accent);
            padding: 1rem 1.5rem;
            margin: 1.5rem 0;
            border-radius: 0 6px 6px 0;
        }

        .note p {
            margin: 0;
            color: var(--text);
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 1.5rem 0;
        }

        th, td {
            padding: 0.75rem;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }

        th {
            color: var(--text);
            font-weight: 600;
            font-size: 0.9rem;
        }

        td {
            color: var(--text-dim);
            font-size: 0.95rem;
        }

        .workflow-step {
            margin: 2rem 0;
            padding-left: 2rem;
            border-left: 2px solid var(--border);
        }

        .workflow-step h4 {
            color: var(--text);
            margin-bottom: 0.5rem;
            font-weight: 600;
        }

        .workflow-step p {
            margin-bottom: 0.5rem;
        }

        footer {
            padding: 3rem 0;
            text-align: center;
            border-top: 1px solid var(--border);
            color: var(--text-dim);
            font-size: 0.9rem;
        }

        .footer-links {
            margin-top: 1rem;
            display: flex;
            justify-content: center;
            gap: 2rem;
            flex-wrap: wrap;
        }

        .footer-links a {
            color: var(--accent);
            text-decoration: none;
        }

        .footer-links a:hover {
            text-decoration: underline;
        }

        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                align-items: flex-start;
            }

            nav {
                flex-direction: column;
                gap: 0.5rem;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <div>
                    <h1>DeepL Translator</h1>
                    <p class="version">v3.0 | GNOME Shell Extension</p>
                </div>
            </div>
            <nav>
                <a href="#install">Installation</a>
                <a href="#usage">Usage</a>
                <a href="#technical">Technical Details</a>
                <a href="https://github.com/juan-de-costa-rica/gnome-deepl-translator">GitHub</a>
            </nav>
        </div>
    </header>

    <main>
        <section class="intro">
            <div class="container">
                <h2>Quick translation for GNOME Shell</h2>
                <p>
                    Select text, click the panel icon, get a translation. That's it. Uses the DeepL API,
                    stores your API key securely in GNOME Keyring, and auto-copies results to your clipboard.
                </p>
                <p>
                    Works with 30+ languages. Auto-detects what you're translating from and figures out
                    the right direction automatically.
                </p>
                <a href="https://github.com/juan-de-costa-rica/gnome-deepl-translator/releases/latest" class="install-btn">Download Latest Release</a>
            </div>
        </section>

        <section id="install">
            <div class="container">
                <h2>Installation</h2>

                <h3>Requirements</h3>
                <ul class="feature-list">
                    <li>GNOME Shell 48+</li>
                    <li>DeepL API key (free tier: 500,000 characters/month)</li>
                    <li>libsecret (usually pre-installed on GNOME systems)</li>
                </ul>

                <h3>Quick Install</h3>
                <div class="code-block">
<pre><code># Download the extension package
wget https://github.com/juan-de-costa-rica/gnome-deepl-translator/releases/download/v3.0/deepl-translator@juan-de-costa-rica-v3-flat.zip

# Install it
gnome-extensions install deepl-translator@juan-de-costa-rica-v3-flat.zip

# Log out and log back in (required for GNOME to discover the extension)

# Enable the extension
gnome-extensions enable deepl-translator@juan-de-costa-rica</code></pre>
                </div>

                <div class="note">
                    <p><strong>Note:</strong> The logout/login step is required on Wayland. GNOME Shell needs to restart to discover new extensions.</p>
                </div>

                <h3>Get Your API Key</h3>
                <p>
                    Sign up for a free DeepL API account at <a href="https://www.deepl.com/pro-api" style="color: var(--accent);">deepl.com/pro-api</a>.
                    Make sure you get the <strong>free API key</strong>, not the Pro tier key (they're different).
                </p>
                <p>
                    Once you have the key, right-click the extension icon in your panel → Preferences → paste your API key.
                    The extension stores it encrypted in GNOME Keyring.
                </p>
            </div>
        </section>

        <section id="usage">
            <div class="container">
                <h2>How to Use</h2>

                <div class="workflow-step">
                    <h4>1. Configure Your Languages</h4>
                    <p>Set your main language (default: English) and pick which secondary languages you want as quick buttons in the panel menu.</p>
                    <p>The extension will auto-detect the source language and translate in the right direction based on what it detects.</p>
                </div>

                <div class="workflow-step">
                    <h4>2. Translate Text</h4>
                    <p>Either select text with your mouse, or copy text to clipboard (Ctrl+C).</p>
                    <p>Click the extension icon in the panel. If you have text selected, it uses that. Otherwise it uses whatever's on your clipboard.</p>
                </div>

                <div class="workflow-step">
                    <h4>3. Pick Target Language</h4>
                    <p>Click one of the language buttons in the popup menu. Translation happens instantly and appears in the popup.</p>
                </div>

                <div class="workflow-step">
                    <h4>4. Auto-Copy</h4>
                    <p>Translation is automatically copied to your clipboard (configurable in settings). Just paste it wherever you need it.</p>
                </div>

                <h3>Translation Logic</h3>
                <p>The extension detects the source language automatically:</p>
                <ul class="feature-list">
                    <li>If source ≠ main language → translates to main language (e.g., Spanish → English)</li>
                    <li>If source = main language → translates to selected secondary language (e.g., English → Spanish)</li>
                </ul>
                <p>No need to manually switch modes or directions. It just figures it out.</p>

                <h3>Settings</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Setting</th>
                            <th>What It Does</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>API Key</td>
                            <td>Your DeepL API key (stored encrypted in GNOME Keyring)</td>
                        </tr>
                        <tr>
                            <td>Main Language</td>
                            <td>Your primary language (default: EN)</td>
                        </tr>
                        <tr>
                            <td>Available Languages</td>
                            <td>Comma-separated language codes that appear as buttons</td>
                        </tr>
                        <tr>
                            <td>Auto-copy to Main</td>
                            <td>Auto-copy when translating to main language</td>
                        </tr>
                        <tr>
                            <td>Auto-copy to Secondary</td>
                            <td>Auto-copy when translating to secondary language</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <section id="technical">
            <div class="container">
                <h2>Technical Details</h2>

                <h3>Architecture</h3>
                <ul class="feature-list">
                    <li><strong>extension.js</strong> - Main UI and extension logic (22KB)</li>
                    <li><strong>translator.js</strong> - DeepL API wrapper with input validation</li>
                    <li><strong>prefs.js</strong> - Preferences dialog</li>
                    <li><strong>lib/keyring.js</strong> - Secure storage wrapper for libsecret</li>
                    <li><strong>lib/languageMap.js</strong> - Shared language code/name mappings</li>
                </ul>

                <h3>Code Quality</h3>
                <ul class="feature-list">
                    <li>Modern async/await patterns throughout (no callback hell)</li>
                    <li>Memory leak prevention via Gio.Cancellable for all async operations</li>
                    <li>Input validation on all user inputs and API calls</li>
                    <li>ESLint configuration enforced (zero errors/warnings)</li>
                    <li>Comprehensive JSDoc documentation on all public APIs</li>
                    <li>Proper Soup.Session cleanup with abort() on destroy</li>
                </ul>

                <h3>Security</h3>
                <p>
                    API keys are stored using libsecret (GNOME Keyring), which provides encryption at rest.
                    The extension never stores the API key in plain text. If you previously used an older version,
                    the extension will automatically migrate your key from dconf to encrypted storage on first run.
                </p>

                <h3>Dependencies</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Library</th>
                            <th>Purpose</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Soup 3</td>
                            <td>HTTP requests to DeepL API</td>
                        </tr>
                        <tr>
                            <td>libsecret</td>
                            <td>Encrypted keyring storage</td>
                        </tr>
                        <tr>
                            <td>Gio, GLib, St, Clutter</td>
                            <td>Standard GNOME platform libraries</td>
                        </tr>
                    </tbody>
                </table>

                <h3>API Usage</h3>
                <p>
                    Calls api-free.deepl.com when you click "Translate". No telemetry, no tracking.
                    Your text is only sent to DeepL's API when you explicitly request a translation.
                </p>

                <h3>Supported Languages</h3>
                <p>
                    All DeepL-supported languages: EN, ES, FR, DE, IT, PT-BR, PT-PT, NL, DA, SV, NB, FI,
                    PL, CS, SK, HU, RO, BG, SL, LT, LV, ET, UK, RU, TR, EL, JA, ZH, KO, ID, AR
                </p>
                <p>
                    See <a href="https://www.deepl.com/docs-api/translate-text/" style="color: var(--accent);">DeepL's API docs</a> for the full list.
                </p>

                <h3>Development</h3>
                <p>Repository: <a href="https://github.com/juan-de-costa-rica/gnome-deepl-translator" style="color: var(--accent);">github.com/juan-de-costa-rica/gnome-deepl-translator</a></p>
                <p>Report issues: <a href="https://github.com/juan-de-costa-rica/gnome-deepl-translator/issues" style="color: var(--accent);">GitHub Issues</a></p>
                <p>License: MIT</p>
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <p>DeepL Translator for GNOME Shell</p>
            <div class="footer-links">
                <a href="https://github.com/juan-de-costa-rica/gnome-deepl-translator">Source Code</a>
                <a href="https://github.com/juan-de-costa-rica/gnome-deepl-translator/releases">Releases</a>
                <a href="https://github.com/juan-de-costa-rica/gnome-deepl-translator/blob/main/CHANGELOG.md">Changelog</a>
            </div>
        </div>
    </footer>
</body>
</html>
